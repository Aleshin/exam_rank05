# üìã –ü–û–õ–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –†–ï–®–ï–ù–ò–Ø - polyset/19-01-25

## ‚úÖ –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å: –§–£–ù–ö–¶–ò–û–ù–ò–†–£–ï–¢ —Å –∑–∞–º–µ—á–∞–Ω–∏—è–º–∏

---

## 1. –ö–û–ú–ü–ò–õ–Ø–¶–ò–Ø –ò –û–®–ò–ë–ö–ò

### –°—Ç–∞—Ç—É—Å: ‚úì –ß–ò–°–¢–ê–Ø –ö–û–ú–ü–ò–õ–Ø–¶–ò–Ø
- **–§–ª–∞–≥–∏:** `-Wall -Wextra -Werror -std=c++98`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 0 –æ—à–∏–±–æ–∫, 0 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- **–§–∞–π–ª—ã:**
  - ‚úì set.cpp / set.hpp
  - ‚úì searchable_array_bag.cpp / searchable_array_bag.hpp
  - ‚úì searchable_tree_bag.cpp / searchable_tree_bag.hpp
  - ‚úì array_bag.cpp / array_bag.hpp
  - ‚úì tree_bag.cpp / tree_bag.hpp
  - ‚úì bag.hpp / searchable_bag.hpp

---

## 2. –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–´–ï –¢–ï–°–¢–´ (10 —Ç–µ—Å—Ç–æ–≤)

| # | –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|---|------|--------|---------|
| 1 | –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ç–∞ | ‚úì | insert(), has(), –¥—É–±–ª–∏–∫–∞—Ç—ã –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è |
| 2 | Array insert | ‚úì | –ú–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| 3 | –î—É–±–ª–∏–∫–∞—Ç—ã –≤ –º–∞—Å—Å–∏–≤–µ | ‚úì | –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 4 | Copy constructor | ‚úì | –î–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ |
| 5 | Assignment operator | ‚úì | –û–ø–µ—Ä–∞—Ç–æ—Ä = —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| 6 | Clear operation | ‚úì | –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–¥–∞–ª—è—é—Ç—Å—è |
| 7 | Set + tree_bag | ‚úì | –†–∞–±–æ—Ç–∞–µ—Ç —Å tree_bag –≤–º–µ—Å—Ç–æ array_bag |
| 8 | get_bag() –º–µ—Ç–æ–¥ | ‚úì | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç |
| 9 | –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ | ‚úì | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é |
| 10 | –û–¥–∏–Ω–æ—á–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç | ‚úì | –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 10/10 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ ‚úì

---

## 3. –°–¢–†–ï–°–°-–¢–ï–°–¢–´ (5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)

| # | –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|---|------|--------|---------|
| 1 | –ë–æ–ª—å—à–æ–π –Ω–∞–±–æ—Ä (100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤) | ‚úì | –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ –Ω–∞–π–¥–µ–Ω—ã |
| 2 | –ß–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏ (50x) | ‚úì | –ù–µ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |
| 3 | –ù–æ–ª—å –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ | ‚úì | –ü–æ–ª–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| 4 | –ù–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ç–æ–≤ | ‚úì | –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç |
| 5 | **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–æ–ø–∏–∏** | ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê** | –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ! |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 4/5 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ, 1 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞

---

## 4. üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ü–û–í–ï–†–•–ù–û–°–¢–ù–û–ï –ö–û–ü–ò–†–û–í–ê–ù–ò–ï

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ö–ª–∞—Å—Å `set` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (shallow copy)** –≤–º–µ—Å—Ç–æ **–≥–ª—É–±–æ–∫–æ–≥–æ (deep copy)**:

```cpp
set::set(const set& copy)
{
    sbag = copy.sbag;  // ‚Üê –û–±–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –û–î–ò–ù searchable_bag!
}
```

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

```cpp
searchable_array_bag bag;
set s1(bag);
s1.insert({10, 20, 30});  // s1: 10 20 30

set s2(s1);  // –ö–æ–ø–∏—Ä—É–µ–º s1
s1.insert(40);

std::cout << s2.print();  // –í—ã–≤–µ–¥–µ—Ç: 10 20 30 40 ‚Üê –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
s2.has(40);               // true ‚Üê –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
```

### –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

1. **–ù–∞—Ä—É—à–µ–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ C++**
   - –ü–æ—Å–ª–µ `set s2(s1)` –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ s1 –≤–∏–¥–Ω—ã –≤ s2
   
2. **–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö**
   - `s1.clear()` —Ç–∞–∫–∂–µ –æ—á–∏—â–∞–µ—Ç s2
   - –í—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å s2 –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º

3. **–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**
   - –ï—Å–ª–∏ –æ–¥–∏–Ω —Å–µ—Ç —É–¥–∞–ª–µ–Ω, –¥—Ä—É–≥–æ–π –ø–æ–ª—É—á–∞–µ—Ç –¥–∏–∫–∏–π —É–∫–∞–∑–∞—Ç–µ–ª—å

### –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

`set` —Ö—Ä–∞–Ω–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ `searchable_bag`:
```cpp
private:
    searchable_bag* sbag;  // –£–∫–∞–∑–∞—Ç–µ–ª—å, –Ω–µ –∫–æ–ø–∏—è –æ–±—ä–µ–∫—Ç–∞!
```

–ü—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **—Å–∞–º —É–∫–∞–∑–∞—Ç–µ–ª—å**, –Ω–æ –Ω–µ **–æ–±—ä–µ–∫—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç**.

### –¢–µ—Å—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

–ó–∞–ø—É—Å—Ç–∏—Ç—å: `./test_copy_issue`

```
‚ùå –ü–†–û–ë–õ–ï–ú–ê: s2 —Å–æ–¥–µ—Ä–∂–∏—Ç 40, —Ö–æ—Ç—è –º—ã –¥–æ–±–∞–≤–ª—è–ª–∏ —Ç–æ–ª—å–∫–æ –≤ s1!
‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: s2 –æ—á–∏—â–µ–Ω–∞, –∫–æ–≥–¥–∞ –æ—á–∏—Å—Ç–∏–ª–∏ s1!
```

---

## 5. ‚úì –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û

- ‚úÖ **insert(int)** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ **insert(int*, int)** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ **has(int)** - –ø–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ sbag)
- ‚úÖ **print()** - –≤—ã–≤–æ–¥ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ **clear()** - –æ—á–∏—Å—Ç–∫–∞
- ‚úÖ **get_bag()** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–µ—Ç
- ‚úÖ **–ê–¥–∞–ø—Ç–µ—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤—ã sbag
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π —Ä–µ–∫—É—Ä—Å–∏–∏** - –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç sbag, –Ω–µ —Å–µ–±—è
- ‚úÖ **–†–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏** - array_bag –∏ tree_bag
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - 100+ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ

---

## 6. üìä –†–ï–ó–Æ–ú–ï

### –£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ç–∞ | ‚úì 100% |
| –†–∞–±–æ—Ç–∞ —Å array_bag | ‚úì 100% |
| –†–∞–±–æ—Ç–∞ —Å tree_bag | ‚úì 100% |
| –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ | ‚úì –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚úì –•–æ—Ä–æ—à–∞—è |
| –ö–æ–º–ø–∏–ª—è—Ü–∏—è | ‚úì –ß–∏—Å—Ç–∞—è |

### –¢—Ä–µ–±—É–µ—Ç —Ä–µ—à–µ–Ω–∏—è:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----------|--------|-----------|
| –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ | –í–´–°–û–ö–ò–ô |
| Deep copy semantics | ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | –í–´–°–û–ö–ò–ô |
| –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–æ–ø–∏–π | ‚ö†Ô∏è –ù–∞—Ä—É—à–µ–Ω–∞ | –í–´–°–û–ö–ò–ô |

---

## 7. üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
```cpp
class set {
private:
    set(const set&);  // –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
    set& operator=(const set&);  // –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
};
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–ª—É–±–æ–∫—É—é –∫–æ–ø–∏—é
–ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≤ `searchable_bag` –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `clone()`:
```cpp
virtual searchable_bag* clone() const = 0;
```

–ó–∞—Ç–µ–º –≤ set.cpp:
```cpp
set::set(const set& copy)
{
    sbag = copy.sbag->clone();  // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –æ–±—ä–µ–∫—Ç–∞
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ (C++11+)
–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ C++98

---

## 8. –°–ü–ò–°–û–ö –§–ê–ô–õ–û–í –¢–ï–°–¢–û–í

- [test_comprehensive.cpp](test_comprehensive.cpp) - 10 —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- [test_stress.cpp](test_stress.cpp) - 5 —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–æ–≤
- [test_copy_issue.cpp](test_copy_issue.cpp) - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìã –§–ò–ù–ê–õ–¨–ù–´–ô –í–ï–†–î–ò–ö–¢

**–°—Ç–∞—Ç—É—Å:** ‚úì –§—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç, ‚ö†Ô∏è —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π

- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ
- –ê–¥–∞–ø—Ç–µ—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- **–ù–û:** –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–µ—Ä–µ–¥ production-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
